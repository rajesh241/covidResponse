<div *ngIf="dataLoaded | async" class="container">
   <h1>Update Apartment</h1>
   <div class="col-lg-8 ">
      <h3 *ngIf="success" class="text-success">Successfully Updated</h3> 
      <h3 *ngIf="!success" class="text-danger" [innerHTML]="errorMessage"> </h3> 
      <h4 class="float-right"><small>All fields are required</small></h4>
      <div class="row well center">
         <form (ngSubmit)="onSubmit()">
            <div  class="col-sm-12">
               <div  class="row">
                  <div class="col-sm-6 form-group">
                     <label>Name</label>
                     <input type="text" class="form-control" id="name" name="name" [(ngModel)]="apartment.name">
                  </div>
                  <div class="col-sm-6 form-group">
                     <label>Number of Rooms</label>
                     <input type="text" class="form-control" name="number_of_rooms" [(ngModel)]="apartment.number_of_rooms">
                  </div>
               </div>


               <div class="row">
                  <div class="col-sm-12 form-group">
                     <label>Description</label>
                     <input type="text" class="form-control" id="description" name="description" [(ngModel)]="apartment.description">
                  </div>
               </div>

               <div class="row">
                  <div class="col-sm-12 form-group">
                     <label>Is Available</label>
                       <select [(ngModel)]="apartment.is_available" name="is_available" class="form-control">
                          <option [value]="null">Is available?</option>
                          <option [value]="true">Yes</option>
                          <option [value]="false">No</option>
                       </select>
                  </div>
               </div>

               <div class="row">
                  <div class="col-sm-6 form-group">
                     <label>Price per Month (in Rupees) </label>
                     <input type="text" class="form-control" id="price_per_month" name="price_per_month" [(ngModel)]="apartment.price_per_month">
                  </div>
                  <div class="col-sm-6 form-group">
                     <label>Floor Area Size (in sqft)</label>
                     <input type="text" class="form-control" name="floor_area_size" [(ngModel)]="apartment.floor_area_size">
                  </div>
               </div>


               <div class="row">
                  <div class="col-sm-6 form-group">
                     <label>Latitude</label>
                     <input type="text" class="form-control" id="latitude" name="latitude" [(ngModel)]="apartment.latitude">
                  </div>
                  <div class="col-sm-6 form-group">
                     <label>Longitude</label>
                     <input type="text" class="form-control" name="longitude" [(ngModel)]="apartment.longitude">
                  </div>
               </div>
               <div class="row">
                  <p> To update the location you can drag the marker. You can use search functionality to arrive at coordinates.</p>
                 <form (ngSubmit)="showLocation()">
                  <div class="col-sm-6 form-group ">
                   <input type="text" class="form-control" [(ngModel)]="address" required [ngModelOptions]="{standalone: true}">
		  </div>
                   <button type="submit">Search Location</button>
                 </form>
	       </div>
               <div class="row">
                  
                 <agm-map
                   [latitude]="latitude"
                   [longitude]="longitude"
                   [zoom]="12"
                   [disableDefaultUI]="false"
                   [zoomControl]="true">
                   <agm-marker 
                   [markerDraggable]="true"
                   (dragEnd)="markerDragEnd($event)"
                       [latitude]="latitude"
		       [longitude]="longitude">
                   </agm-marker>
                 </agm-map>
                 <p *ngIf="loading">Loading...</p>
               </div>
 

               <button type="submit" class="btn btn-lg btn-info">Submit</button>	                            				
            </div>
         </form>
      </div>
   </div>
</div>
